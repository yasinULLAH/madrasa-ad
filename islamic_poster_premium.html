<!DOCTYPE html>

<html dir="rtl" lang="ur">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Islamic Poster Creator - Premium Edition</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<style>
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Noto+Nastaliq+Urdu:wght@400;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Calibri', 'Noto Nastaliq Urdu', 'Amiri', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-attachment: fixed;
            padding: 20px;
            min-height: 100vh;
        }

        .toolbar {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            margin-bottom: 25px;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            border: 3px solid rgba(255,255,255,0.5);
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Calibri', 'Noto Nastaliq Urdu', sans-serif;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #f2994a 0%, #f2c94c 100%);
            color: #000;
        }

        .btn-info {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
        }

        .poster-container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 25px;
        }

        .poster-preview {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.4);
            flex: 1;
            max-width: 900px;
            border: 4px solid rgba(255,255,255,0.8);
        }

        #posterCanvas {
            width: 100%;
            background: linear-gradient(to bottom, #87CEEB 0%, #E0F6FF 30%, #FFF8DC 50%, #F0FFF0 70%, #90EE90 100%);
            border: 5px solid #c41e3a;
            border-radius: 15px;
            padding: 25px;
            position: relative;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3), inset 0 0 20px rgba(255,255,255,0.5);
        }

        .editable {
            cursor: text;
            transition: all 0.3s;
            position: relative;
            min-height: 20px;
            border-radius: 5px;
        }

        .editable:hover {
            outline: 3px dashed #667eea;
            outline-offset: 4px;
            background: rgba(102, 126, 234, 0.15);
            box-shadow: 0 0 15px rgba(102, 126, 234, 0.3);
        }

        .editable:focus {
            outline: 4px solid #667eea;
            outline-offset: 4px;
            background: rgba(102, 126, 234, 0.2);
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
        }

        .editable[contenteditable="true"]:empty:before {
            content: attr(data-placeholder);
            color: rgba(255,255,255,0.6);
            font-style: italic;
        }

        .deletable {
            position: relative;
        }

        .delete-btn {
            position: absolute;
            top: -12px;
            right: -12px;
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
            color: white;
            border: 3px solid white;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
            transition: all 0.3s;
        }

        .delete-btn:hover {
            transform: scale(1.2) rotate(90deg);
            box-shadow: 0 6px 20px rgba(235, 51, 73, 0.6);
        }

        .deletable:hover .delete-btn {
            display: flex;
        }

        .poster-header {
            background: linear-gradient(135deg, #FFA500 0%, #FFD700 30%, #FFA500 60%, #FF8C00 100%);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            position: relative;
            margin-bottom: 25px;
            box-shadow: 0 8px 25px rgba(255, 165, 0, 0.5), inset 0 2px 10px rgba(255,255,255,0.4);
            border: 4px solid #FF8C00;
        }

        .poster-title {
            background: linear-gradient(135deg, #c41e3a 0%, #8B0000 100%);
            color: white;
            font-size: 52px;
            font-weight: bold;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            box-shadow: 0 6px 20px rgba(196, 30, 58, 0.5), inset 0 2px 10px rgba(255,255,255,0.2);
            text-shadow: 3px 3px 6px rgba(0,0,0,0.4);
            border: 3px solid rgba(255,255,255,0.3);
        }

        .poster-dates {
            background: linear-gradient(135deg, #4169E1 0%, #1E90FF 100%);
            color: white;
            font-size: 36px;
            padding: 15px;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            box-shadow: 0 6px 20px rgba(65, 105, 225, 0.5);
            border: 3px solid rgba(255,255,255,0.3);
        }

        .date-badge {
            background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
            color: #4169E1;
            padding: 8px 20px;
            border-radius: 50%;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            border: 3px solid #4169E1;
        }

        .sections-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }

        .section-card {
            background: linear-gradient(135deg, #FFA500 0%, #FF8C00 100%);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(255, 140, 0, 0.4);
            border: 4px solid #FFD700;
            transition: all 0.3s;
        }

        .section-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(255, 140, 0, 0.6);
        }

        .section-title {
            color: white;
            font-size: 26px;
            font-weight: bold;
            margin-bottom: 12px;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            border: 2px solid rgba(255,255,255,0.3);
        }

        .section-content {
            background: linear-gradient(135deg, #4169E1 0%, #1E90FF 100%);
            color: white;
            padding: 18px;
            border-radius: 12px;
            border: 4px dotted white;
            min-height: 130px;
            font-size: 17px;
            line-height: 1.9;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.2);
        }

        .timing-section {
            background: linear-gradient(135deg, #2C5F4F 0%, #1a3d32 100%);
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 15px;
            margin-bottom: 20px;
            font-size: 22px;
            font-weight: bold;
            box-shadow: 0 8px 25px rgba(44, 95, 79, 0.5);
            border: 4px solid #3d7a64;
        }

        .bottom-sections {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .bottom-card {
            background: linear-gradient(135deg, #FFA500 0%, #FF8C00 100%);
            border-radius: 15px;
            padding: 20px;
            border: 4px solid #8B4513;
            box-shadow: 0 8px 25px rgba(139, 69, 19, 0.4);
        }

        .bottom-card-title {
            background: linear-gradient(135deg, #8B4513 0%, #654321 100%);
            color: #FFD700;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            margin-bottom: 12px;
            font-size: 18px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            border: 2px solid #FFD700;
        }

        .bottom-card-content {
            color: #000;
            font-size: 15px;
            line-height: 1.9;
            font-weight: 500;
        }

        .middle-section {
            background: linear-gradient(135deg, #2C5F4F 0%, #1a3d32 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(44, 95, 79, 0.5);
            border: 4px solid #3d7a64;
        }

        .middle-title {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 12px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .middle-content {
            font-size: 15px;
            line-height: 1.8;
        }

        .footer-section {
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 50%, #8B4513 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(139, 69, 19, 0.5);
            border: 4px solid #654321;
        }

        .footer-phone {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            padding: 12px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            text-align: center;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .footer-address {
            font-size: 22px;
            font-weight: bold;
            padding: 12px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            text-align: center;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .decorative-elements {
            position: absolute;
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
            box-shadow: 0 4px 15px rgba(255, 165, 0, 0.6);
            animation: rotate 10s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .deco-left {
            top: 20px;
            left: -15px;
        }

        .deco-right {
            top: 20px;
            right: -15px;
        }

        .sidebar {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.4);
            width: 350px;
            max-height: 85vh;
            overflow-y: auto;
            border: 4px solid rgba(255,255,255,0.8);
        }

        .sidebar h3 {
            text-align: center;
            color: #c41e3a;
            margin-bottom: 20px;
            font-size: 24px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .poster-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .poster-item {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .poster-item:hover {
            background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
            transform: translateX(-8px);
            border-color: #667eea;
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
        }

        .poster-item-name {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 16px;
            color: #333;
        }

        .poster-item-date {
            font-size: 13px;
            color: #666;
            margin-bottom: 10px;
        }

        .poster-item-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }

        .btn-small {
            padding: 8px 14px;
            font-size: 13px;
        }

        .add-section-btn {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            border: 3px dashed white;
            padding: 15px;
            text-align: center;
            border-radius: 12px;
            cursor: pointer;
            margin: 15px 0;
            font-weight: bold;
            font-size: 18px;
            box-shadow: 0 6px 20px rgba(17, 153, 142, 0.4);
            transition: all 0.3s;
        }

        .add-section-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(17, 153, 142, 0.6);
            background: linear-gradient(135deg, #0e7e70 0%, #2dd165 100%);
        }

        .add-section-btn i {
            margin-left: 10px;
        }

        .full-width-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
            border: 4px solid rgba(255,255,255,0.3);
        }

        .full-width-section-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .full-width-section-content {
            font-size: 18px;
            line-height: 1.8;
        }

        .centered-small-section {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            margin: 20px auto;
            text-align: center;
            max-width: 500px;
            box-shadow: 0 8px 25px rgba(240, 147, 251, 0.5);
            border: 4px solid rgba(255,255,255,0.3);
        }

        .centered-small-section-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 12px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .centered-small-section-content {
            font-size: 16px;
            line-height: 1.7;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            padding: 18px 30px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            z-index: 1000;
            animation: slideIn 0.3s ease;
            font-weight: bold;
            border: 3px solid rgba(255,255,255,0.5);
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        input[type="text"] {
            padding: 12px;
            border: 3px solid #ddd;
            border-radius: 10px;
            font-family: 'Calibri', 'Noto Nastaliq Urdu', sans-serif;
            width: 250px;
            font-size: 16px;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 15px rgba(102, 126, 234, 0.3);
        }

        .action-menu {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            justify-content: center;
            flex-wrap: wrap;
        }

        @media (max-width: 1200px) {
            .poster-container {
                flex-direction: column;
                align-items: center;
            }

            .sidebar {
                width: 100%;
                max-width: 900px;
            }

            .sections-container,
            .bottom-sections {
                grid-template-columns: 1fr;
            }
        }
    </style>
<link href="manifest.json" rel="manifest"/><link href="favicon.ico" rel="icon" type="image/x-icon"/></head>
<body>
<div class="toolbar">
<input id="posterNameInput" placeholder="Ù¾ÙˆØ³Ù¹Ø± Ú©Ø§ Ù†Ø§Ù… Ù„Ú©Ú¾ÛŒÚº" type="text" value=""/>
<button class="btn btn-success" onclick="savePoster()"><i class="fas fa-save"></i> Ù…Ø­ÙÙˆØ¸ Ú©Ø±ÛŒÚº</button>
<button class="btn btn-primary" onclick="newPoster()"><i class="fas fa-file"></i> Ù†ÛŒØ§ Ù¾ÙˆØ³Ù¹Ø±</button>
<button class="btn btn-info" onclick="exportToImage()"><i class="fas fa-image"></i> ØªØµÙˆÛŒØ± (High Res)</button>
<button class="btn btn-warning" onclick="exportToPDF()"><i class="fas fa-file-pdf"></i> PDF</button>
<button class="btn btn-secondary" onclick="toggleSidebar()"><i class="fas fa-list"></i> Ù…Ø­ÙÙˆØ¸ Ø´Ø¯Û</button>
</div>
<div class="poster-container">
<div class="poster-preview">
<div id="posterCanvas">
<div class="poster-header deletable">
<button class="delete-btn" onclick="deleteElement(this)">Ã—</button>
<div class="decorative-elements deco-left"></div>
<div class="decorative-elements deco-right"></div>
<div class="poster-title editable" contenteditable="true" data-placeholder="Ø¹Ù†ÙˆØ§Ù† Ù„Ú©Ú¾ÛŒÚº">Ø§Ø¹Ù„Ø§Ù† Ø¯Ø§Ø®Ù„Û</div>
<div class="poster-dates">
<span class="editable" contenteditable="true">1445</span>
<span>/</span>
<span class="editable" contenteditable="true">2024</span>
</div>
<div style="display: flex; justify-content: space-around; margin-top: 15px; font-size: 20px;">
<span><span class="date-badge editable" contenteditable="true">10</span> <span class="editable" contenteditable="true">Ø´ÙˆØ§Ù„ 1445</span></span>
<span><span class="date-badge editable" contenteditable="true">20</span> <span class="editable" contenteditable="true">Ø§Ù¾Ø±ÛŒÙ„ 2024</span></span>
</div>
</div>
<div class="sections-container" id="mainSections">
<div class="section-card deletable">
<button class="delete-btn" onclick="deleteElement(this)">Ã—</button>
<div class="section-title editable" contenteditable="true" data-placeholder="Ø¹Ù†ÙˆØ§Ù†">ØªØµÙˆØ±ÛŒ Ø¹Ù„Ù…ÛŒÙ…</div>
<div class="section-content editable" contenteditable="true" data-placeholder="ØªÙØµÛŒÙ„ Ù„Ú©Ú¾ÛŒÚº">Ø§Ù†Ø¯Ø±ÙˆÙ†ÛŒ Ù…Ø°ÛØ¨ÛŒ ØªØ¹Ù„ÛŒÙ… Ú©ÛŒ ÙØ±Ø§ÛÙ…ÛŒ Ú©Û’ Ø³Ø§ØªÚ¾ Ù…Ø¹Ø§Ø´Ø±Û’ Ú©Û’ Ù„ÛŒÛ’ Ù…ÙÛŒØ¯ Ø§Ù†Ø³Ø§Ù† ØªÛŒØ§Ø± Ú©Ø±ÛŒÚº</div>
</div>
<div class="section-card deletable" style="background: linear-gradient(135deg, #2C5F4F 0%, #1a3d32 100%);">
<button class="delete-btn" onclick="deleteElement(this)">Ã—</button>
<div class="section-title editable" contenteditable="true" style="background: rgba(255,255,255,0.2);">ØªØ¬ÙˆÛŒØ¯Ø§Ù„Ù‚Ø±Ø¢Ù†</div>
<div class="section-content editable" contenteditable="true" style="background: linear-gradient(135deg, #E6B0AA 0%, #F5CBA7 100%); color: #000; border-color: #8B4513;">Ø­Ø§ÙØ¸Û Ù‚Ø±Ø¢Ù† Ú©Ø±ÛŒÙ… Ø§ÙˆØ± ØªØ¬ÙˆÛŒØ¯ Ú©ÛŒ ØªØ¹Ù„ÛŒÙ…</div>
</div>
<div class="section-card deletable">
<button class="delete-btn" onclick="deleteElement(this)">Ã—</button>
<div class="section-title editable" contenteditable="true">Ø¯Ø±ÙˆØ³ Ù†Ø¸Ø§Ù…ÛŒ</div>
<div class="section-content editable" contenteditable="true">Ø§ÙˆÙ„Ø§Ø¯ Ú©ÛŒ ØªØ¹Ù„ÛŒÙ… Ùˆ ØªØ±Ø¨ÛŒØª Ú©ÛŒ ÙÚ©Ø± ÛÛ’ ØªÙˆ Ø§Ø¨Ú¾ÛŒ Ø¯Ø§Ø®Ù„Û Ù„ÛŒÚº</div>
</div>
</div>
<div class="action-menu">
<div class="add-section-btn" onclick="addMainSection()" style="flex: 1; max-width: 300px;">
<i class="fas fa-plus-circle"></i> Ù†ÛŒØ§ Ø³ÛŒÚ©Ø´Ù†
                    </div>
<div class="add-section-btn" onclick="addFullWidthSection()" style="flex: 1; max-width: 300px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
<i class="fas fa-arrows-alt-h"></i> Ù¾ÙˆØ±Ø§ Ú†ÙˆÚ‘Ø§ Ø³ÛŒÚ©Ø´Ù†
                    </div>
<div class="add-section-btn" onclick="addCenteredSmallSection()" style="flex: 1; max-width: 300px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
<i class="fas fa-align-center"></i> Ú†Ú¾ÙˆÙ¹Ø§ Ø³ÛŒÚ©Ø´Ù†
                    </div>
</div>
<div class="timing-section editable deletable" contenteditable="true" data-placeholder="Ø§ÙˆÙ‚Ø§Øª Ù„Ú©Ú¾ÛŒÚº">
<button class="delete-btn" onclick="deleteElement(this)">Ã—</button>
                    Ø§ÙˆÙ‚Ø§Øª Ø¯Ø§Ø®Ù„Û: ØµØ¨Ø­ 8:00 ØªØ§ 12:30
                </div>
<div class="deletable" style="background: linear-gradient(135deg, #2C5F4F 0%, #1a3d32 100%); padding: 20px; border-radius: 15px; margin-bottom: 20px; color: white; text-align: center; box-shadow: 0 8px 25px rgba(44, 95, 79, 0.5); border: 4px solid #3d7a64;">
<button class="delete-btn" onclick="deleteElement(this)">Ã—</button>
<div class="editable" contenteditable="true" style="font-size: 22px; font-weight: bold; margin-bottom: 12px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">Ø´Ø¹Ø¨Û Ø­ÙØ¸ Ú©ÛŒ ØªÙØµÛŒÙ„Ø§Øª</div>
<div class="editable" contenteditable="true" data-placeholder="ØªÙØµÛŒÙ„ Ù„Ú©Ú¾ÛŒÚº" style="font-size: 16px; line-height: 1.8;">10 Ø´ÙˆØ§Ù„ Ø³Û’ Ù…Ø³Ù„Ø³Ù„ 20 Ø§Ù¾Ø±ÛŒÙ„ ØªÚ© Ø§ÙˆØ± Ø±ÙˆØ³ Ø§ØªÙØ§Ù‚ÛŒ Ú©Û’ Ø·Ù„Ø¨Ø§Ø¡ Ú©Û’ Ù„ÛŒÛ’ 13 Ø´ÙˆØ§Ù„ 23 Ø§Ù¾Ø±ÛŒÙ„ Ø³Û’ Ù…Ø³Ù„Ø³Ù„ Ø´Ø±ÙˆØ¹</div>
</div>
<div class="bottom-sections" id="bottomSections">
<div class="bottom-card deletable">
<button class="delete-btn" onclick="deleteElement(this)">Ã—</button>
<div class="bottom-card-title editable" contenteditable="true">Ø¶Ø±ÙˆØ±ÛŒ Ù†ÙˆÙ¹</div>
<div class="bottom-card-content editable" contenteditable="true" data-placeholder="Ù†ÙˆÙ¹ Ù„Ú©Ú¾ÛŒÚº">Ø­Ø§ÙØ¸Û ÛÙˆ Ø¬Ø§Ù†Û’ ÙˆØ§Ù„Ø§ Ø·Ø§Ù„Ø¨ Ø¹Ù„Ù…ØŒ Ø§Ø±Ø§Ø¯Û’ Ú©Û’ Ø³Ø§ØªÚ¾ Ø¯Ø§Ø±Ø§Ù„Ø¹Ù„ÙˆÙ… Ù…ÛŒÚº Ø¯Ø§Ø®Ù„Û Ù„Û’ Ø§ÙˆØ± Ú©ÛŒ ÙØ¶ÛŒÙ„Øª</div>
</div>
<div class="middle-section deletable">
<button class="delete-btn" onclick="deleteElement(this)">Ã—</button>
<div class="middle-title editable" contenteditable="true">Ø¯ÛŒÙ†ÛŒ Ø§ÙˆØ± Ø¹ØµØ±ÛŒ Ø¹Ù„ÙˆÙ… Ú©Ø§ Ø­Ø³ÛŒÙ† Ø§Ù…ØªØ²Ø§Ø¬</div>
<div class="middle-content editable" contenteditable="true" data-placeholder="ØªÙØµÛŒÙ„">Ø¯ÛŒÙ†ÛŒ ØªØ¹Ù„ÛŒÙ…Ø§Øª Ú©Û’ Ø³Ø§ØªÚ¾ Ø¹ØµØ±ÛŒ Ø¹Ù„ÙˆÙ… Ú©ÛŒ ØªØ¹Ù„ÛŒÙ…Û” Ù‚Ø±Ø¢Ù†ØŒ Ø­Ø¯ÛŒØ«ØŒ ÙÙ‚Û Ø§ÙˆØ± Ø¹Ø±Ø¨ÛŒ Ø²Ø¨Ø§Ù† Ú©Û’ Ø³Ø§ØªÚ¾ Ø§Ù†Ú¯Ù„Ø´ØŒ Ø§Ø±Ø¯ÙˆØŒ Ø±ÛŒØ§Ø¶ÛŒ Ø§ÙˆØ± Ø³Ø§Ø¦Ù†Ø³</div>
</div>
<div class="bottom-card deletable">
<button class="delete-btn" onclick="deleteElement(this)">Ã—</button>
<div class="bottom-card-title editable" contenteditable="true">Ø®Ø§Øµ Ù†ÙˆÙ¹</div>
<div class="bottom-card-content editable" contenteditable="true" data-placeholder="Ù†ÙˆÙ¹ Ù„Ú©Ú¾ÛŒÚº">Ø§ÙˆÙ„Ø§Ø¯ Ú©ÛŒ ØªØ¹Ù„ÛŒÙ… Ùˆ ØªØ±Ø¨ÛŒØª Ú©ÛŒ ÙÚ©Ø± ÛÛ’ ØªÙˆ ÛÙ…Ø§Ø±Û’ Ø³Ø§ØªÚ¾ Ø±Ø§Ø¨Ø·Û Ú©Ø±ÛŒÚº Ø§ÙˆØ± Ø§Ù¾Ù†Û’ Ø¨Ú†ÙˆÚº Ú©Ùˆ Ø¯ÛŒÙ†ÛŒ Ø§ÙˆØ± Ø¹ØµØ±ÛŒ ØªØ¹Ù„ÛŒÙ… Ø³Û’ Ø¢Ø±Ø§Ø³ØªÛ Ú©Ø±ÛŒÚº</div>
</div>
</div>
<div class="add-section-btn" onclick="addBottomSection()"><i class="fas fa-plus-circle"></i> Ù†Ú†Ù„Ø§ Ø³ÛŒÚ©Ø´Ù† Ø´Ø§Ù…Ù„ Ú©Ø±ÛŒÚº</div>
<div class="footer-section deletable">
<button class="delete-btn" onclick="deleteElement(this)">Ã—</button>
<div>
<div class="footer-phone editable" contenteditable="true" data-placeholder="ÙÙˆÙ† Ù†Ù…Ø¨Ø±">ğŸ“ 0336-9586656 | 0311-5342747 | 0312-3550107</div>
<div class="footer-address">
<div class="editable" contenteditable="true" data-placeholder="Ù¾ØªÛ">Ù…Ø¯Ø±Ø³Û Ø¹Ø±Ø¨ÛŒÛ Ø§Ø³Ù„Ø§Ù…ÛŒÛ Ù…ÛŒÙ…Ù„</div>
<div class="editable" contenteditable="true" data-placeholder="Ù…Ú©Ù…Ù„ Ù¾ØªÛ" style="font-size: 16px; margin-top: 8px;">Ø´Ø§ÛØ±Ø§Û Ø­ØµÛ Ù¾Ù„ ÛØ±Ù† Ù…Ø³Ø¬Ø¯ Ø´Ø±ÛŒÙ Ú©Ø±Ø§Ú†ÛŒ</div>
</div>
</div>
</div>
</div>
</div>
<div class="sidebar" id="sidebar" style="display: none;">
<h3><i class="fas fa-bookmark"></i> Ù…Ø­ÙÙˆØ¸ Ø´Ø¯Û Ù¾ÙˆØ³Ù¹Ø±Ø²</h3>
<div class="poster-list" id="posterList"></div>
</div>
</div>
<script>
        // IndexedDB Setup
        let db;
        const DB_NAME = 'IslamicPosterDB';
        const STORE_NAME = 'posters';

        function initDB() {
            const request = indexedDB.open(DB_NAME, 1);

            request.onerror = () => {
                console.error('Database failed to open');
            };

            request.onsuccess = () => {
                db = request.result;
                loadPosterList();
            };

            request.onupgradeneeded = (e) => {
                db = e.target.result;
                const objectStore = db.createObjectStore(STORE_NAME, { keyPath: 'id', autoIncrement: true });
                objectStore.createIndex('name', 'name', { unique: false });
                objectStore.createIndex('timestamp', 'timestamp', { unique: false });
            };
        }

        function savePoster() {
            const posterName = document.getElementById('posterNameInput').value || 'Ø¨Û’ Ù†Ø§Ù… Ù¾ÙˆØ³Ù¹Ø± ' + new Date().toLocaleString('ur-PK');
            const posterHTML = document.getElementById('posterCanvas').innerHTML;

            const posterData = {
                name: posterName,
                timestamp: new Date().toISOString(),
                html: posterHTML
            };

            const transaction = db.transaction([STORE_NAME], 'readwrite');
            const objectStore = transaction.objectStore(STORE_NAME);
            const request = objectStore.add(posterData);

            request.onsuccess = () => {
                showToast('âœ… Ù¾ÙˆØ³Ù¹Ø± Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ø³Û’ Ù…Ø­ÙÙˆØ¸ ÛÙˆ Ú¯ÛŒØ§!', 'success');
                loadPosterList();
                document.getElementById('posterNameInput').value = '';
            };

            request.onerror = () => {
                showToast('âŒ Ù…Ø­ÙÙˆØ¸ Ú©Ø±Ù†Û’ Ù…ÛŒÚº Ø®Ø±Ø§Ø¨ÛŒ!', 'error');
            };
        }

        function loadPosterList() {
            const transaction = db.transaction([STORE_NAME], 'readonly');
            const objectStore = transaction.objectStore(STORE_NAME);
            const request = objectStore.getAll();

            request.onsuccess = () => {
                const posters = request.result;
                const listContainer = document.getElementById('posterList');
                listContainer.innerHTML = '';

                if (posters.length === 0) {
                    listContainer.innerHTML = '<p style="text-align: center; color: #999; padding: 30px;">Ú©ÙˆØ¦ÛŒ Ù…Ø­ÙÙˆØ¸ Ø´Ø¯Û Ù¾ÙˆØ³Ù¹Ø± Ù†ÛÛŒÚº</p>';
                    return;
                }

                posters.reverse().forEach(poster => {
                    const item = document.createElement('div');
                    item.className = 'poster-item';

                    const date = new Date(poster.timestamp).toLocaleString('ur-PK');

                    item.innerHTML = `
                        <div class="poster-item-name"><i class="fas fa-file-alt"></i> ${poster.name}</div>
                        <div class="poster-item-date"><i class="far fa-clock"></i> ${date}</div>
                        <div class="poster-item-actions">
                            <button class="btn btn-primary btn-small" onclick="loadPoster(${poster.id})">
                                <i class="fas fa-download"></i> Ù„ÙˆÚˆ
                            </button>
                            <button class="btn btn-danger btn-small" onclick="deletePoster(${poster.id})">
                                <i class="fas fa-trash"></i> Ø­Ø°Ù
                            </button>
                        </div>
                    `;
                    listContainer.appendChild(item);
                });
            };
        }

        function loadPoster(id) {
            const transaction = db.transaction([STORE_NAME], 'readonly');
            const objectStore = transaction.objectStore(STORE_NAME);
            const request = objectStore.get(id);

            request.onsuccess = () => {
                const poster = request.result;
                if (poster) {
                    document.getElementById('posterCanvas').innerHTML = poster.html;
                    document.getElementById('posterNameInput').value = poster.name;
                    showToast('âœ… Ù¾ÙˆØ³Ù¹Ø± Ù„ÙˆÚˆ ÛÙˆ Ú¯ÛŒØ§!', 'success');
                }
            };
        }

        function deletePoster(id) {
            if (!confirm('Ú©ÛŒØ§ Ø¢Ù¾ ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø³ Ù¾ÙˆØ³Ù¹Ø± Ú©Ùˆ Ø­Ø°Ù Ú©Ø±Ù†Ø§ Ú†Ø§ÛØªÛ’ ÛÛŒÚºØŸ')) return;

            const transaction = db.transaction([STORE_NAME], 'readwrite');
            const objectStore = transaction.objectStore(STORE_NAME);
            const request = objectStore.delete(id);

            request.onsuccess = () => {
                showToast('âœ… Ù¾ÙˆØ³Ù¹Ø± Ø­Ø°Ù ÛÙˆ Ú¯ÛŒØ§!', 'success');
                loadPosterList();
            };
        }

        function newPoster() {
            if (confirm('Ú©ÛŒØ§ Ø¢Ù¾ Ù†ÛŒØ§ Ù¾ÙˆØ³Ù¹Ø± Ø¨Ù†Ø§Ù†Ø§ Ú†Ø§ÛØªÛ’ ÛÛŒÚºØŸ Ù…ÙˆØ¬ÙˆØ¯Û ØªØ¨Ø¯ÛŒÙ„ÛŒØ§Úº Ø¶Ø§Ø¦Ø¹ ÛÙˆ Ø¬Ø§Ø¦ÛŒÚº Ú¯ÛŒÛ”')) {
                location.reload();
            }
        }

        function deleteElement(btn) {
            if (confirm('Ú©ÛŒØ§ Ø¢Ù¾ Ø§Ø³ Ø¹Ù†ØµØ± Ú©Ùˆ Ø­Ø°Ù Ú©Ø±Ù†Ø§ Ú†Ø§ÛØªÛ’ ÛÛŒÚºØŸ')) {
                const element = btn.parentElement;
                element.remove();
                showToast('âœ… Ø¹Ù†ØµØ± Ø­Ø°Ù ÛÙˆ Ú¯ÛŒØ§', 'success');
            }
        }

        function addMainSection() {
            const container = document.getElementById('mainSections');
            const newSection = document.createElement('div');
            newSection.className = 'section-card deletable';
            newSection.innerHTML = `
                <button class="delete-btn" onclick="deleteElement(this)">Ã—</button>
                <div class="section-title editable" contenteditable="true" data-placeholder="Ø¹Ù†ÙˆØ§Ù† Ù„Ú©Ú¾ÛŒÚº">Ù†ÛŒØ§ Ø³ÛŒÚ©Ø´Ù†</div>
                <div class="section-content editable" contenteditable="true" data-placeholder="ØªÙØµÛŒÙ„ Ù„Ú©Ú¾ÛŒÚº">ÛŒÛØ§Úº Ø§Ù¾Ù†ÛŒ ØªÙØµÛŒÙ„ Ù„Ú©Ú¾ÛŒÚº</div>
            `;
            container.appendChild(newSection);
            showToast('âœ… Ù†ÛŒØ§ Ø³ÛŒÚ©Ø´Ù† Ø´Ø§Ù…Ù„ ÛÙˆ Ú¯ÛŒØ§', 'success');
        }

        function addFullWidthSection() {
            const canvas = document.getElementById('posterCanvas');
            const newSection = document.createElement('div');
            newSection.className = 'full-width-section deletable';
            newSection.innerHTML = `
                <button class="delete-btn" onclick="deleteElement(this)">Ã—</button>
                <div class="full-width-section-title editable" contenteditable="true" data-placeholder="Ø¹Ù†ÙˆØ§Ù†">Ù¾ÙˆØ±Ø§ Ú†ÙˆÚ‘Ø§ Ø³ÛŒÚ©Ø´Ù†</div>
                <div class="full-width-section-content editable" contenteditable="true" data-placeholder="Ù…ÙˆØ§Ø¯ Ù„Ú©Ú¾ÛŒÚº">ÛŒÛØ§Úº Ø§Ù¾Ù†Ø§ Ù…ÙˆØ§Ø¯ Ù„Ú©Ú¾ÛŒÚºÛ” ÛŒÛ Ø³ÛŒÚ©Ø´Ù† Ù¾ÙˆØ±ÛŒ Ú†ÙˆÚ‘Ø§Ø¦ÛŒ Ù…ÛŒÚº Ø¸Ø§ÛØ± ÛÙˆÚ¯Ø§Û”</div>
            `;
            canvas.insertBefore(newSection, canvas.querySelector('.footer-section'));
            showToast('âœ… Ù¾ÙˆØ±Ø§ Ú†ÙˆÚ‘Ø§ Ø³ÛŒÚ©Ø´Ù† Ø´Ø§Ù…Ù„ ÛÙˆ Ú¯ÛŒØ§', 'success');
        }

        function addCenteredSmallSection() {
            const canvas = document.getElementById('posterCanvas');
            const newSection = document.createElement('div');
            newSection.className = 'centered-small-section deletable';
            newSection.innerHTML = `
                <button class="delete-btn" onclick="deleteElement(this)">Ã—</button>
                <div class="centered-small-section-title editable" contenteditable="true" data-placeholder="Ø¹Ù†ÙˆØ§Ù†">Ú†Ú¾ÙˆÙ¹Ø§ Ø³ÛŒÚ©Ø´Ù†</div>
                <div class="centered-small-section-content editable" contenteditable="true" data-placeholder="Ù…ÙˆØ§Ø¯">ÛŒÛ Ø§ÛŒÚ© Ú†Ú¾ÙˆÙ¹Ø§ Ø³ÛŒÚ©Ø´Ù† ÛÛ’ Ø¬Ùˆ ÙˆØ³Ø· Ù…ÛŒÚº ÛÛ’Û”</div>
            `;
            canvas.insertBefore(newSection, canvas.querySelector('.footer-section'));
            showToast('âœ… Ú†Ú¾ÙˆÙ¹Ø§ Ø³ÛŒÚ©Ø´Ù† Ø´Ø§Ù…Ù„ ÛÙˆ Ú¯ÛŒØ§', 'success');
        }

        function addBottomSection() {
            const container = document.getElementById('bottomSections');
            const newSection = document.createElement('div');
            newSection.className = 'bottom-card deletable';
            newSection.innerHTML = `
                <button class="delete-btn" onclick="deleteElement(this)">Ã—</button>
                <div class="bottom-card-title editable" contenteditable="true" data-placeholder="Ø¹Ù†ÙˆØ§Ù†">Ù†ÛŒØ§ Ø³ÛŒÚ©Ø´Ù†</div>
                <div class="bottom-card-content editable" contenteditable="true" data-placeholder="Ù…ÙˆØ§Ø¯ Ù„Ú©Ú¾ÛŒÚº">ÛŒÛØ§Úº Ø§Ù¾Ù†Ø§ Ù…ÙˆØ§Ø¯ Ù„Ú©Ú¾ÛŒÚº</div>
            `;
            container.appendChild(newSection);
            showToast('âœ… Ù†ÛŒØ§ Ø³ÛŒÚ©Ø´Ù† Ø´Ø§Ù…Ù„ ÛÙˆ Ú¯ÛŒØ§', 'success');
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.style.display = sidebar.style.display === 'none' ? 'block' : 'none';
        }

        async function exportToImage() {
            const canvas = document.getElementById('posterCanvas');

            // Hide delete buttons and stop animations
            const deleteButtons = canvas.querySelectorAll('.delete-btn');
            const decoratives = canvas.querySelectorAll('.decorative-elements');
            deleteButtons.forEach(btn => btn.style.display = 'none');
            decoratives.forEach(deco => deco.style.animation = 'none');

            try {
                const downloadCanvas = await html2canvas(canvas, {
                    scale: 3,
                    useCORS: true,
                    allowTaint: true,
                    backgroundColor: '#ffffff',
                    width: canvas.offsetWidth,
                    height: canvas.offsetHeight
                });

                const link = document.createElement('a');
                link.download = `islamic-poster-${Date.now()}.png`;
                link.href = downloadCanvas.toDataURL('image/png', 1.0);
                link.click();

                showToast('âœ… ØªØµÙˆÛŒØ± Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ø³Û’ ÚˆØ§Ø¤Ù† Ù„ÙˆÚˆ ÛÙˆ Ú¯Ø¦ÛŒ!', 'success');
            } catch (error) {
                console.error('Export error:', error);
                showToast('âŒ Ø§ÛŒÚ©Ø³Ù¾ÙˆØ±Ù¹ Ù…ÛŒÚº Ø®Ø±Ø§Ø¨ÛŒ!', 'error');
            }

            // Restore delete buttons and animations
            deleteButtons.forEach(btn => btn.style.display = '');
            decoratives.forEach(deco => deco.style.animation = '');
        }

        async function exportToPDF() {
            const canvas = document.getElementById('posterCanvas');

            // Hide delete buttons and stop animations
            const deleteButtons = canvas.querySelectorAll('.delete-btn');
            const decoratives = canvas.querySelectorAll('.decorative-elements');
            deleteButtons.forEach(btn => btn.style.display = 'none');
            decoratives.forEach(deco => deco.style.animation = 'none');

            try {
                const downloadCanvas = await html2canvas(canvas, {
                    scale: 2.5,
                    useCORS: true,
                    allowTaint: true,
                    backgroundColor: '#ffffff'
                });

                const imgData = downloadCanvas.toDataURL('image/png');
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4'
                });

                const imgWidth = 210;
                const imgHeight = (downloadCanvas.height * imgWidth) / downloadCanvas.width;

                pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
                pdf.save(`islamic-poster-${Date.now()}.pdf`);

                showToast('âœ… PDF Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ø³Û’ ÚˆØ§Ø¤Ù† Ù„ÙˆÚˆ ÛÙˆ Ú¯Ø¦ÛŒ!', 'success');
            } catch (error) {
                console.error('PDF export error:', error);
                showToast('âŒ PDF Ø§ÛŒÚ©Ø³Ù¾ÙˆØ±Ù¹ Ù…ÛŒÚº Ø®Ø±Ø§Ø¨ÛŒ!', 'error');
            }

            // Restore delete buttons and animations
            deleteButtons.forEach(btn => btn.style.display = '');
            decoratives.forEach(deco => deco.style.animation = '');
        }

        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `<i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i> ${message}`;
            toast.style.background = type === 'success' 
                ? 'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)' 
                : 'linear-gradient(135deg, #eb3349 0%, #f45c43 100%)';
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Initialize
        window.onload = () => {
            initDB();
        };
    </script>
<script type="module">
  import { Workbox } from 'https://storage.googleapis.com/workbox-cdn/releases/7.0.0/workbox-window.prod.mjs';

  const swUrl = './sw.js';
  const wb = new Workbox(swUrl);

  wb.addEventListener('waiting', () => {
    console.log('A new service worker is waiting to activate.');
    wb.messageSW({ type: 'SKIP_WAITING' });
  });

  wb.addEventListener('controlling', () => {
    console.log('The new service worker is now in control. Reloading page for updates...');
    window.location.reload();
  });

  wb.register();
</script></body>
</html>